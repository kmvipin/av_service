<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Sign Up</title>
  <style>
    /* CSS styling for the form */
    body {
      background-color: #f5f5f5;
    }
    form {
      max-width: 600px;
      margin: 0 auto;
      background-color: #ffffff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
    }
    h1 {
      text-align: center;
      margin-top: 0;
      color: #333;
    }
    label {
      display: block;
      margin-bottom: 6px;
      color: #333;
    }
    input, select {
      display: block;
      width: 100%;
      padding: 10px;
      font-size: 16px;
      border-radius: 4px;
      border: none;
      margin-bottom: 16px;
      box-sizing: border-box;
    }
    input[type="submit"] {
      background-color: #2196F3;
      color: #fff;
      font-size: 16px;
      padding: 10px 20px;
      border-radius: 4px;
      border: none;
      cursor: pointer;
      margin-top: 16px;
    }
    input[type="submit"]:hover {
      background-color: #0c7cd5;
    }
  </style>
</head>
<body>
  <form id="signup-form">
    <h1>Sign Up</h1>
    <label for="first-name">First Name</label>
    <input type="text" id="first-name" name="first_name" required>

    <label for="last-name">Last Name</label>
    <input type="text" id="last-name" name="last_name" required>

    <label for="mobile-number">Mobile Number</label>
    <input type="tel" id="mobile-number" name="mobileNumber" required>

    <label for="email">Email</label>
    <input type="email" id="email" name="email" required>

    <label for="confirm-email">Confirm Email</label>
    <input type="email" id="confirm-email" name="confirmEmail" required>

    <label for="pwd">Password</label>
    <input type="password" id="pwd" name="pwd" required>

    <label for="confirm-pwd">Confirm Password</label>
    <input type="password" id="confirm-pwd" name="confirmPwd" required>

    <label for="age">Age</label>
    <input type="number" id="age" name="age" min="18" max="99" required>

    <label for="gender">Gender</label>
    <select id="gender" name="gender" required>
      <option value="">Select Gender</option>
      <option value="male">M</option>
      <option value="female">F</option>
      <option value="other">O</option>
    </select>

    <label for="date-of-birth">Date of Birth</label>
    <input type="date" id="date-of-birth" name="date_of_birth" max="2005-12-31" required>

    <label for="address1">Address Line 1</label>
   
    <input type="text" id="address1" name="address.address1" required>

    <label for="address2">Address Line 2</label>
    <input type="text" id="address2" name="address.address2">

    <label for="city">City</label>
    <input type="text" id="city" name="address.city" required>

    <label for="state">State</label>
    <input type="text" id="state" name="address.state" required>

    <label for="zipcode">Zipcode</label>
    <input type="text" id="zipcode" name="address.zipcode" required>

    <input type="submit" value="Sign Up">
  </form>

  <script>
    const form = document.getElementById("signup-form");

    form.addEventListener("submit", async (event) => {
      event.preventDefault();

      const formData = new FormData(form);

      const data = {};
      for (let [key, value] of formData.entries()) {
        if (key.includes(".")) {
          const [outerKey, innerKey] = key.split(".");
          data[outerKey] = { ...data[outerKey], [innerKey]: value };
        } else {
          data[key] = value;
        }
      }

      try {
        const response = await fetch("/api/customer/newUser", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(data)
        });

        const responseData = await response.json();

        console.log(responseData);
      } catch (error) {
        console.error(error);
      }
    });
  </script>
</body>
</html>
